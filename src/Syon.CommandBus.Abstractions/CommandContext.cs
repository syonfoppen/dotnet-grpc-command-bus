namespace Syon.CommandBus.Abstractions;

/// <summary>
/// Provides contextual metadata for the execution of a command.
///
/// This context is created by the command dispatcher and passed to the command handler.
/// It contains identifiers used for tracing, correlation across services, and idempotency.
///
/// The context is immutable to ensure handlers cannot accidentally alter execution metadata.
/// </summary>
public sealed class CommandContext
{
    /// <summary>
    /// Gets the unique identifier of this command execution.
    ///
    /// This identifier is generated by the dispatcher and is guaranteed to be unique
    /// within the scope of the command bus. It can be used for logging, tracing,
    /// and correlating command execution across system boundaries.
    /// </summary>
    public required string CommandId { get; init; }

    /// <summary>
    /// Gets an optional correlation identifier.
    ///
    /// This value is typically propagated from an upstream request or command
    /// and allows multiple related operations to be correlated in logs,
    /// traces, or distributed monitoring systems.
    /// </summary>
    public string? CorrelationId { get; init; }

    /// <summary>
    /// Gets an optional idempotency key for this command.
    ///
    /// When provided, this key allows the command bus or underlying transport
    /// to detect duplicate command submissions and ensure that the command
    /// is processed at most once.
    /// </summary>
    public string? IdempotencyKey { get; init; }
}

